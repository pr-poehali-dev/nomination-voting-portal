CREATE TABLE IF NOT EXISTS candidates (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    nomination_id INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS votes (
    id SERIAL PRIMARY KEY,
    candidate_id INTEGER NOT NULL REFERENCES candidates(id),
    nomination_id INTEGER NOT NULL,
    voter_ip VARCHAR(45) NOT NULL,
    voted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(nomination_id, voter_ip)
);

CREATE INDEX idx_votes_nomination_ip ON votes(nomination_id, voter_ip);
CREATE INDEX idx_votes_candidate ON votes(candidate_id);

INSERT INTO candidates (name, nomination_id) VALUES
('Артём А.', 1), ('Зарина А.', 1), ('Мария Б.', 1), ('Владислав Г.', 1), ('Кирилл Г.', 1),
('Станислав Е.', 1), ('Радмир К.', 1), ('Аделина К.', 1), ('Диана К.', 1), ('Анжелика К.', 1),
('Арслан М.', 1), ('София М.', 1), ('Ждан П.', 1), ('Даниил С.', 1), ('Лев С.', 1),
('Арина С.', 1), ('Аскар С.', 1), ('Тимур Х.', 1), ('Данис Х.', 1), ('Амина Ш.', 1),
('Иван Ш.', 1),
('Артём А.', 2), ('Зарина А.', 2), ('Мария Б.', 2), ('Владислав Г.', 2), ('Кирилл Г.', 2),
('Станислав Е.', 2), ('Радмир К.', 2), ('Аделина К.', 2), ('Диана К.', 2), ('Анжелика К.', 2),
('Арслан М.', 2), ('София М.', 2), ('Ждан П.', 2), ('Даниил С.', 2), ('Лев С.', 2),
('Арина С.', 2), ('Аскар С.', 2), ('Тимур Х.', 2), ('Данис Х.', 2), ('Амина Ш.', 2),
('Иван Ш.', 2),
('Артём А.', 3), ('Зарина А.', 3), ('Мария Б.', 3), ('Владислав Г.', 3), ('Кирилл Г.', 3),
('Станислав Е.', 3), ('Радмир К.', 3), ('Аделина К.', 3), ('Диана К.', 3), ('Анжелика К.', 3),
('Арслан М.', 3), ('София М.', 3), ('Ждан П.', 3), ('Даниил С.', 3), ('Лев С.', 3),
('Арина С.', 3), ('Аскар С.', 3), ('Тимур Х.', 3), ('Данис Х.', 3), ('Амина Ш.', 3),
('Иван Ш.', 3),
('Артём А.', 4), ('Зарина А.', 4), ('Мария Б.', 4), ('Владислав Г.', 4), ('Кирилл Г.', 4),
('Станислав Е.', 4), ('Радмир К.', 4), ('Аделина К.', 4), ('Диана К.', 4), ('Анжелика К.', 4),
('Арслан М.', 4), ('София М.', 4), ('Ждан П.', 4), ('Даниил С.', 4), ('Лев С.', 4),
('Арина С.', 4), ('Аскар С.', 4), ('Тимур Х.', 4), ('Данис Х.', 4), ('Амина Ш.', 4),
('Иван Ш.', 4),
('Артём А.', 5), ('Зарина А.', 5), ('Мария Б.', 5), ('Владислав Г.', 5), ('Кирилл Г.', 5),
('Станислав Е.', 5), ('Радмир К.', 5), ('Аделина К.', 5), ('Диана К.', 5), ('Анжелика К.', 5),
('Арслан М.', 5), ('София М.', 5), ('Ждан П.', 5), ('Даниил С.', 5), ('Лев С.', 5),
('Арина С.', 5), ('Аскар С.', 5), ('Тимур Х.', 5), ('Данис Х.', 5), ('Амина Ш.', 5),
('Иван Ш.', 5),
('Артём А.', 6), ('Зарина А.', 6), ('Мария Б.', 6), ('Владислав Г.', 6), ('Кирилл Г.', 6),
('Станислав Е.', 6), ('Радмир К.', 6), ('Аделина К.', 6), ('Диана К.', 6), ('Анжелика К.', 6),
('Арслан М.', 6), ('София М.', 6), ('Ждан П.', 6), ('Даниил С.', 6), ('Лев С.', 6),
('Арина С.', 6), ('Аскар С.', 6), ('Тимур Х.', 6), ('Данис Х.', 6), ('Амина Ш.', 6),
('Иван Ш.', 6),
('Артём А.', 7), ('Зарина А.', 7), ('Мария Б.', 7), ('Владислав Г.', 7), ('Кирилл Г.', 7),
('Станислав Е.', 7), ('Радмир К.', 7), ('Аделина К.', 7), ('Диана К.', 7), ('Анжелика К.', 7),
('Арслан М.', 7), ('София М.', 7), ('Ждан П.', 7), ('Даниил С.', 7), ('Лев С.', 7),
('Арина С.', 7), ('Аскар С.', 7), ('Тимур Х.', 7), ('Данис Х.', 7), ('Амина Ш.', 7),
('Иван Ш.', 7),
('Артём А.', 8), ('Зарина А.', 8), ('Мария Б.', 8), ('Владислав Г.', 8), ('Кирилл Г.', 8),
('Станислав Е.', 8), ('Радмир К.', 8), ('Аделина К.', 8), ('Диана К.', 8), ('Анжелика К.', 8),
('Арслан М.', 8), ('София М.', 8), ('Ждан П.', 8), ('Даниил С.', 8), ('Лев С.', 8),
('Арина С.', 8), ('Аскар С.', 8), ('Тимур Х.', 8), ('Данис Х.', 8), ('Амина Ш.', 8),
('Иван Ш.', 8);